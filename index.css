
:root {
    --color-gold-accent: #FFC107; /* The primary brand color */
    --color-primary-main: var(--color-gold-accent);
    --color-primary-rgb: 255, 193, 7;
    
    /* Light Theme - We'll keep it but default to dark */
    --color-bg-main-light: #ffffff;
    --color-bg-surface-light: #f8f9fa;
    --color-text-primary-light: #212529;
    --color-text-secondary-light: #6c757d;
    --color-border-light: #dee2e6;
    
    /* Dark Theme */
    --color-bg-main-dark: #121212; 
    --color-bg-surface-dark: #1E1E1E;
    --color-text-primary-dark: #F8F9FA;
    --color-text-secondary-dark: #adb5bd;
    --color-border-dark: #343a40;

    /* Shared colors */
    --color-success: #28a745;
    --color-warning: #fd7e14;
    --color-error: #dc3545;
    --color-info: #17a2b8;

    --font-heading: 'Poppins', sans-serif;
    --font-body: 'Inter', sans-serif;
    --shadow-soft: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 5px 15px rgba(0, 0, 0, 0.2);
    --transition-speed: 0.3s ease;
    --header-height: 70px;
}

body {
    --color-bg-main: var(--color-bg-main-light);
    --color-bg-surface: var(--color-bg-surface-light);
    --color-text-primary: var(--color-text-primary-light);
    --color-text-secondary: var(--color-text-secondary-light);
    --color-border: var(--color-border-light);
    --hero-gradient: linear-gradient(145deg, #fff, #f4f8f9 70%);
}

body[data-theme="dark"] {
    --color-bg-main: var(--color-bg-main-dark);
    --color-bg-surface: var(--color-bg-surface-dark);
    --color-text-primary: var(--color-text-primary-dark);
    --color-text-secondary: var(--color-text-secondary-dark);
    --color-border: var(--color-border-dark);
    --hero-gradient: linear-gradient(145deg, #1e1e1e 0%, var(--color-bg-main) 70%);
}


* { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
body { 
    font-family: var(--font-body); 
    line-height: 1.7; 
    color: var(--color-text-secondary); 
    background-color: var(--color-bg-main); 
    -webkit-font-smoothing: antialiased; 
    transition: background-color var(--transition-speed), color var(--transition-speed);
}
.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
h1, h2, h3, h4, h5, h6 { font-family: var(--font-heading); font-weight: 600; color: var(--color-text-primary); line-height: 1.3; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
.hidden { display: none !important; }
.text-danger { color: var(--color-error) !important; }
.text-secondary { color: var(--color-text-secondary) !important; }
body.mobile-menu-open, body[data-menu-open="true"], body.modal-open { overflow: hidden; }


/* Auth State Management */
body[data-auth-state="logged-in"] #landing-page,
body[data-auth-state="logged-in"] .header,
body[data-auth-state="logged-in"] .mobile-nav-container,
body[data-auth-state="logged-in"] footer {
    display: none;
}
body[data-auth-state="logged-out"] #app-dashboard,
body[data-auth-state="logged-out"] #payment-modal,
body[data-auth-state="logged-out"] #action-modal,
body[data-auth-state="logged-out"] #budget-modal,
body[data-auth-state="logged-out"] #transaction-modal,
body[data-auth-state="logged-out"] #goal-contribution-modal,
body[data-auth-state="logged-out"] #goal-modal {
    display: none;
}

/* Config Error Banner */
.config-banner { background-color: var(--color-error); color: #fff; padding: 12px 20px; text-align: center; font-size: 0.95em; line-height: 1.4; position: sticky; top: 0; z-index: 2000; }

/* Glassmorphism Effect */
.glass-effect {
    background: rgba(var(--color-bg-surface-light), 0.65);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
    transition: background-color var(--transition-speed), border-color var(--transition-speed);
}
body[data-theme="dark"] .glass-effect {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}

/* Header */
.header { height: var(--header-height); background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--color-border); transition: background-color var(--transition-speed), border-color var(--transition-speed); }
body[data-theme="dark"] .header { background: rgba(18, 18, 18, 0.7); border-bottom-color: var(--color-border-dark); }
.header-container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
.header-logo, .sidebar-logo { display: inline-flex; align-items: center; gap: 12px; text-decoration: none; font-family: var(--font-heading); font-weight: 700; color: var(--color-text-primary); font-size: 1.8em; }
.sidebar-logo { padding: 0; font-size: 1.6em; }
.logo-svg { width: 36px; height: 36px; color: var(--color-primary-main); }
.header-nav { display: none; }
@media(min-width: 768px) { .header-nav { display: flex; align-items: center; gap: 30px; } }
.header-nav .nav-list { display: flex; list-style: none; gap: 30px; margin: 0; padding: 0; }
.nav-button { background: none; border: none; cursor: pointer; color: var(--color-text-secondary); text-decoration: none; font-weight: 500; font-size: 1em; transition: opacity 0.3s ease, color 0.3s ease; padding: 5px 0; font-family: var(--font-body); }
.nav-button:hover { color: var(--color-text-primary); }
.header-actions { display: none; }
@media(min-width: 768px) { .header-actions { display: flex; gap: 15px; align-items: center; } }
.header-actions .btn { font-size: 0.95em; }

/* SVG Icons */
.btn-icon { display: inline-flex; align-items: center; justify-content: center; width: 1.2em; height: 1.2em; flex-shrink: 0;}
.btn-icon svg { width: 100%; height: 100%;}
.icon-btn svg, .mobile-menu-toggle svg, .mobile-menu-close svg, .fab svg, .app-menu-toggle svg, .sidebar-collapse-toggle svg { width: 100%; height: 100%; fill: currentColor; }

/* Feature Icons */
.feature-icon { width: 64px; height: 64px; background-color: rgba(var(--color-primary-rgb), 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px auto; color: var(--color-primary-main); box-shadow: var(--shadow-soft); }
.feature-icon svg { width: 32px; height: 32px; }
body[data-theme="dark"] .feature-icon { background-color: var(--color-bg-surface); }

/* Buttons */
.btn { display: inline-flex; padding: 12px 28px; border-radius: 8px; font-weight: 600; text-align: center; transition: transform var(--transition-speed), box-shadow var(--transition-speed), background-color var(--transition-speed); border: 2px solid transparent; cursor: pointer; text-decoration: none; gap: 10px; align-items: center; justify-content: center; font-size: 1em; }
.btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: var(--shadow-medium); }
.btn-primary { background-color: var(--color-primary-main); color: #121212; border-color: var(--color-primary-main); }
.btn-primary:hover:not(:disabled) { background-color: #ffca2c; border-color: #ffc720; }
.btn-secondary-outline { background-color: transparent; color: var(--color-text-primary); border-color: var(--color-border); }
.btn-secondary-outline:hover:not(:disabled) { background-color: var(--color-bg-surface); border-color: var(--color-border); }
.btn-danger { background-color: var(--color-error); color: #fff; border-color: var(--color-error); }
.btn-danger:hover:not(:disabled) { background-color: #c82333; border-color: #bd2130; }
.btn:disabled { cursor: not-allowed; opacity: 0.6; }
.btn-sm { font-size: 0.85em; padding: 8px 16px; }
.btn-lg { padding: 14px 32px; font-size: 1.05em; }

.icon-btn { background: none; border: none; color: var(--color-text-secondary); cursor: pointer; font-size: 1em; padding: 5px; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; transition: background-color 0.2s ease, color 0.2s ease; }
.icon-btn:hover { background-color: var(--color-bg-main); color: var(--color-text-primary); }
.delete-btn:hover { background-color: rgba(220, 53, 69, 0.1); color: var(--color-error); }
.icon-btn .btn-icon { width: 18px; height: 18px; }
.icon-btn:disabled {
    cursor: not-allowed;
    opacity: 0.4;
    background-color: transparent;
    color: var(--color-text-secondary);
}

/* Hero Section */
.hero-section { padding: 100px 0; background-color: var(--color-bg-main); background-image: var(--hero-gradient); overflow: hidden; }
.interactive-hero-grid { display: grid; grid-template-columns: 1fr; gap: 60px; align-items: center; }
@media (min-width: 992px) { .interactive-hero-grid { grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr); } }
.hero-content h1 { font-size: clamp(2.5em, 5vw, 3.8em); line-height: 1.15; margin-bottom: 25px; font-weight: 700; color: var(--color-text-primary); }
.hero-content .lead { font-size: 1.25em; margin-bottom: 40px; max-width: 520px; color: var(--color-text-secondary); }
.hero-content .hero-actions { display: flex; gap: 15px; flex-wrap: wrap; }

/* Sections */
.features-section { padding: 100px 20px; background-color: var(--color-bg-surface); }
.section-title { font-size: 2.2em; text-align: center; margin-bottom: 15px; color: var(--color-primary-main); }
.section-subtitle { font-size: 1.1em; color: var(--color-text-secondary); text-align: center; margin: 0 auto 60px auto; max-width: 700px; }
.features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 60px; }
.feature-card { background-color: var(--color-bg-main); padding: 35px; border-radius: 12px; text-align: center; border: 1px solid var(--color-border); transition: transform var(--transition-speed), box-shadow var(--transition-speed), border-color var(--transition-speed), background-color var(--transition-speed); }
.feature-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-medium); border-color: var(--color-primary-main); }
.feature-card h3 { font-size: 1.4em; margin-bottom: 15px; }
.feature-card p { color: var(--color-text-secondary); font-size: 1em; line-height: 1.6; }

/* For Merchants Section */
.for-merchants-section { padding: 100px 20px; background-color: var(--color-bg-main); }
.for-merchants-content { display: flex; flex-direction: column; align-items: center; gap: 25px; max-width: 800px; margin: 50px auto 0 auto; text-align: center; }
.merchant-benefits { list-style: '✓'; padding-left: 20px; text-align: left; max-width: 400px; margin-bottom: 20px; color: var(--color-text-secondary); }
.merchant-benefits li { padding-left: 15px; margin-bottom: 10px; font-size: 1.05em; }

/* Modal Styles */
.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; z-index: 1100; animation: fadeInModal 0.3s ease; }
.modal-content { position: relative; padding: 40px; border-radius: 12px; width: 100%; max-width: 500px; margin: 20px; background: var(--color-bg-surface); border: 1px solid var(--color-border); animation: slideInUpModal 0.4s ease; }
.modal-title { font-size: 1.5em; margin-bottom: 20px; text-align: center; }
.modal-body p { margin-bottom: 15px; }
.modal-body .form-group { margin-top: 15px; }
.modal-actions { display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px; }
.modal-close-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; color: var(--color-text-secondary); font-size: 1.5em; line-height: 1; cursor: pointer; transition: color 0.2s ease; z-index: 10; width: 32px; height: 32px; }
.modal-close-btn:hover { color: var(--color-text-primary); }
@keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideInUpModal { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* Forms */
.form-group { margin-bottom: 20px; }
.form-group:last-of-type { margin-bottom: 0; }
.form-group label { display: block; margin-bottom: 10px; font-weight: 500; color: var(--color-text-primary); text-align: left; }
.input-field, .form-group textarea, .form-group select { width: 100%; padding: 15px; border: 1px solid var(--color-border); background-color: var(--color-bg-main); color: var(--color-text-primary); border-radius: 6px; font-family: var(--font-body); font-size: 1em; transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color var(--transition-speed), color var(--transition-speed); }
.input-field:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: var(--color-primary-main); box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25); }
.form-group textarea { min-height: 100px; resize: vertical; }
.input-field.ai-populated { background-color: rgba(var(--color-primary-rgb), 0.1); border-color: var(--color-primary-main); }
.form-text { font-size: 0.85em; color: var(--color-text-secondary); line-height: 1.5; margin-top: 5px;}

/* Auth Form Container */
#auth-modal .modal-content { padding: 0; }
#auth-form-container { padding: 40px; }
.auth-tabs { display: flex; border-bottom: 1px solid var(--color-border); margin-bottom: 25px; }
.auth-tab-btn { flex-grow: 1; background: none; border: none; padding: 15px; cursor: pointer; font-size: 1.1em; font-weight: 600; color: var(--color-text-secondary); border-bottom: 3px solid transparent; transition: all 0.2s ease-in-out; }
.auth-tab-btn.active { color: var(--color-primary-main); border-bottom-color: var(--color-primary-main); }
.auth-form { padding-top: 10px; }
.auth-form .btn { width: 100%; margin-top: 20px; }
.auth-type-toggle { display: flex; background-color: var(--color-bg-main); border: 1px solid var(--color-border); border-radius: 8px; padding: 5px; }
.auth-type-toggle button { flex: 1; padding: 10px; border: none; background: transparent; color: var(--color-text-secondary); font-weight: 600; border-radius: 6px; cursor: pointer; transition: all 0.2s ease-in-out; }
.auth-type-toggle button.active { background-color: var(--color-primary-main); color: #121212; }

/* Mobile Header & Navigation */
.mobile-menu-toggle { display: block; background: none; border: none; cursor: pointer; color: var(--color-text-primary); width: 32px; height: 32px; }
@media(min-width: 768px) { .mobile-menu-toggle { display: none; } }
.mobile-nav-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--color-bg-main); z-index: 1200; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; display: flex; flex-direction: column; }
body.mobile-menu-open .mobile-nav-container { opacity: 1; visibility: visible; }
.mobile-nav-header { display: flex; justify-content: space-between; align-items: center; padding: 0 20px; height: var(--header-height); flex-shrink: 0; border-bottom: 1px solid var(--color-border); }
.mobile-menu-close { background: none; border: none; color: var(--color-text-primary); cursor: pointer; width: 32px; height: 32px; }
.mobile-nav-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 40px; }
.mobile-nav-list { list-style: none; text-align: center; }
.mobile-nav-list .nav-button { font-size: 2em; font-family: var(--font-heading); font-weight: 600; color: var(--color-text-primary); padding: 15px; }
.mobile-nav-actions { display: flex; flex-direction: column; gap: 15px; width: 80%; max-width: 300px; }
.mobile-nav-actions .btn { width: 100%; }

/* App Layout & Responsive Sidebar */
.app-menu-overlay { display: none; }
.sidebar .sidebar-close-btn { display: none; }
.app-menu-toggle { display: none; }
@media (max-width: 991.98px) {
    #app-dashboard {
        display: block;
    }
    .app-menu-toggle { 
        display: inline-flex;
        color: var(--color-text-primary);
    }
    .sidebar { position: fixed; top: 0; left: 0; height: 100%; z-index: 1300; transform: translateX(-100%); box-shadow: var(--shadow-medium); }
    .sidebar.open { transform: translateX(0); }
    .sidebar .sidebar-close-btn { 
        display: inline-flex; 
        position: absolute; 
        top: 15px; right: 15px; 
        z-index: 1301;
        color: var(--color-text-primary);
    }
    .sidebar.collapsed { width: 260px; } /* Disable collapse on mobile */
    .sidebar.collapsed .logo-text, .sidebar.collapsed .nav-link-text { display: inline-block; }
    .sidebar.collapsed .sidebar-logo, .sidebar.collapsed .nav-link { justify-content: flex-start; padding: 15px 25px; }
    .sidebar-collapse-toggle-wrapper { display: none; }
    .app-menu-overlay { 
        position: fixed; 
        top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.5); 
        z-index: 1250; 
        display: none; 
        transition: opacity 0.3s ease;
        opacity: 0;
    }
    body[data-menu-open="true"] .app-menu-overlay { 
        display: block; 
        opacity: 1;
    }
}

/* Main App Dashboard Layout */
#app-dashboard { display: flex; height: 100vh; background-color: var(--color-bg-main); position: relative; }
.sidebar { width: 260px; background: var(--color-bg-surface); border-right: 1px solid var(--color-border); display: flex; flex-direction: column; transition: width 0.3s ease-in-out, transform 0.3s ease-in-out, background-color var(--transition-speed), border-color var(--transition-speed); position: relative; flex-shrink: 0; }
.sidebar-header { padding: 0 20px; height: var(--header-height); border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.sidebar .sidebar-logo { font-size: 1.5em; }
.sidebar .nav { flex-grow: 1; padding: 20px 0; overflow-y: auto; display: flex; flex-direction: column;}
.sidebar .nav-list { list-style: none; }
.sidebar .nav-link { display: flex; align-items: center; gap: 15px; padding: 15px 25px; text-decoration: none; color: var(--color-text-secondary); font-weight: 500; border-left: 3px solid transparent; transition: all 0.2s ease-in-out; white-space: nowrap; }
.sidebar .nav-link .nav-link-text { overflow: hidden; text-overflow: ellipsis; }
.sidebar .nav-link .btn-icon { color: var(--color-text-secondary); transition: color 0.2s ease-in-out; }
.sidebar .nav-link:hover { background-color: var(--color-bg-main); color: var(--color-text-primary); }
.sidebar .nav-link.active { background-color: rgba(var(--color-primary-rgb), 0.1); color: var(--color-primary-main); border-left-color: var(--color-primary-main); }
.sidebar .nav-link.active .btn-icon { color: var(--color-primary-main); }
.sidebar-footer { padding: 20px; border-top: 1px solid var(--color-border); }
.sidebar-footer .nav-link { padding: 10px 0; }
.sidebar-collapse-toggle-wrapper { padding: 15px 0; border-top: 1px solid var(--color-border); }
.sidebar-collapse-toggle { width: 100%; justify-content: center; }
.sidebar.collapsed { width: 80px; }
.sidebar.collapsed .logo-text, .sidebar.collapsed .nav-link-text { display: none; }
.sidebar.collapsed .sidebar-logo, .sidebar.collapsed .nav-link { justify-content: center; }
.sidebar.collapsed .sidebar-footer { padding: 20px 10px; }
.main-content { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }
.main-header { height: var(--header-height); padding: 0 30px; border-bottom: 1px solid var(--color-border); display: flex; align-items: center; gap: 20px; flex-shrink: 0; background-color: var(--color-bg-surface); }
.main-header-content { display: flex; justify-content: space-between; align-items: center; width: 100%; }
.main-header-title { font-size: 1.5em; margin: 0; }
.header-wallet-container {
    display: flex;
    align-items: center;
    gap: 15px;
}
.header-wallet-display { display: flex; align-items: center; gap: 10px; background: var(--color-bg-main); padding: 8px 16px; border-radius: 8px; border: 1px solid var(--color-border); }
.wallet-label { font-size: 0.9em; color: var(--color-text-secondary); }
.wallet-amount { font-weight: 600; color: var(--color-text-primary); font-size: 1.1em; }
.header-wallet-container .btn-sm {
    gap: 5px;
}
.view-wrapper { flex-grow: 1; padding: 30px; overflow-y: auto; display: flex; flex-direction: column; }
.view-wrapper::-webkit-scrollbar { width: 8px; }
.view-wrapper::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 4px; }

/* Co-Pilot View Layout */
.co-pilot-grid { display: flex; flex-grow: 1; min-height: 0; }
.sidebar-view-header { padding: 0 20px; }
.sidebar-list-title {
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--color-text-secondary);
    padding: 20px 25px 0;
}
.empty-list-item, .mini .empty-list-item {
    font-style: italic;
    color: var(--color-text-secondary);
    padding: 15px 25px;
    font-size: 0.9em;
}
.empty-state.mini .action-link {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--color-primary-main);
    text-decoration: none;
}


.sidebar-chat-history {
    padding-top: 20px;
    margin-top: 20px;
    border-top: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.sidebar-chat-history .nav-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding: 0 20px;
}

.chat-history-item { position: relative; }
.chat-history-link { 
    display: flex;
    align-items: center;
    gap: 15px;
    width: 100%;
    padding: 12px 15px; 
    border-radius: 6px; 
    text-decoration: none; 
    color: var(--color-text-secondary); 
    transition: background-color 0.2s, color 0.2s; 
    white-space: nowrap; 
    overflow: hidden; 
    border: none;
    background: transparent;
    cursor: pointer;
    font-family: var(--font-body);
    font-size: 0.9em;
    font-weight: 500;
    text-align: left;
}
.chat-history-link .nav-link-text {
    overflow: hidden;
    text-overflow: ellipsis;
}
.chat-history-item:hover .chat-history-link { 
    background-color: var(--color-bg-main); 
    color: var(--color-text-primary); 
}
.chat-history-item.active .chat-history-link { 
    background-color: rgba(var(--color-primary-rgb), 0.1); 
    color: var(--color-primary-main); 
    font-weight: 600; 
}
.chat-history-item .delete-btn { 
    position: absolute; 
    right: 12px; 
    top: 50%; 
    transform: translateY(-50%); 
    opacity: 0; 
    transition: opacity 0.2s; 
}
.chat-history-item:hover .delete-btn, .chat-history-item .delete-btn:focus { opacity: 1; }

.main-chat-area { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; }

.chat-container, .skeleton-chat { 
    flex-grow: 1;
    display: flex; 
    flex-direction: column; 
    background-color: var(--color-bg-surface); 
    border-radius: 12px; 
    border: 1px solid var(--color-border); 
    overflow: hidden; 
}
.skeleton-chat { padding: 20px; }

.chat-messages { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
.chat-messages::-webkit-scrollbar { width: 8px; }
.chat-messages::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 4px; }
.message { max-width: 85%; line-height: 1.6; padding: 12px 18px; border-radius: 18px; word-wrap: break-word; }
.user-message { background-color: var(--color-primary-main); color: var(--color-bg-main-dark); align-self: flex-end; border-bottom-right-radius: 4px; }
.ai-message { background-color: var(--color-bg-main); color: var(--color-text-primary); align-self: flex-start; box-shadow: var(--shadow-soft); }
.ai-message p:first-child { margin-top: 0; }
.ai-message p:last-child { margin-bottom: 0; }
.ai-message ul, .ai-message ol { padding-left: 20px; margin-top: 10px; margin-bottom: 10px; }
.ai-message li { margin-bottom: 5px; }
.blinking-cursor { display: inline-block; width: 8px; height: 1.2em; background-color: var(--color-text-primary); animation: blink 1s step-end infinite; vertical-align: text-bottom; margin-left: 4px; }
@keyframes blink { from, to { background-color: transparent; } 50% { background-color: var(--color-text-primary); } }
.thinking-indicator { display: flex; align-items: center; gap: 10px; color: var(--color-text-secondary); }

/* Spinners */
.spinner, #app-loader .initial-spinner { width: 1.2em; height: 1.2em; border: 2px solid currentColor; border-right-color: transparent; border-radius: 50%; animation: spin .75s linear infinite; }
.spinner-large { width: 48px; height: 48px; border-width: 4px; }
#app-loader .initial-spinner { font-size: 32px; color: var(--color-primary-main); }
@keyframes spin { to { transform: rotate(360deg); } }
#app-loader { position: fixed; inset: 0; background: var(--color-bg-main); z-index: 9999; display: flex; align-items: center; justify-content: center; }

/* Chat Smart Queries & Form */
.smart-queries { display: flex; gap: 10px; padding: 10px 20px; border-top: 1px solid var(--color-border); flex-wrap: wrap; }
.smart-query-btn { background-color: var(--color-bg-main); border: 1px solid var(--color-border); padding: 8px 12px; border-radius: 16px; font-size: 0.85em; cursor: pointer; transition: background-color 0.2s; }
.smart-query-btn:hover { background-color: rgba(var(--color-primary-rgb), 0.1); }
.chat-form { display: flex; gap: 10px; padding: 20px; border-top: 1px solid var(--color-border); background-color: var(--color-bg-surface); }
.chat-form .input-field { padding: 14px 20px; border-radius: 25px; }
.chat-form .btn { border-radius: 50%; width: 50px; height: 50px; flex-shrink: 0; padding: 0; }
.chat-form .btn svg { width: 22px; height: 22px; }

/* AI Card Responses (Recommendations, Trip Plans) */
.recommendation-summary, .trip-plan-summary { font-weight: 600; margin-bottom: 12px; }
.recommendation-card-container { margin: 10px -5px -5px -5px; }
.recommendation-card { aspect-ratio: 16/9; background-size: cover; background-position: center; border-radius: 10px; color: #fff; display: flex; flex-direction: column; justify-content: flex-end; padding: 15px; position: relative; overflow: hidden; }
.recommendation-card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0) 60%); }
.recommendation-card-content { position: relative; z-index: 2; }
.recommendation-card-header .product-name { color: #fff; font-size: 1.1em; }
.recommendation-card-header .merchant-name { font-size: 0.9em; opacity: 0.8; margin-bottom: 10px; }
.recommendation-card-footer { display: flex; justify-content: space-between; align-items: center; }
.recommendation-card-footer .price { font-size: 1.1em; font-weight: 700; }
.affordability-tag { font-size: 0.8em; font-weight: 600; padding: 4px 8px; border-radius: 6px; }
.affordability-tag.affordable { background: var(--color-success); color: #fff; }
.affordability-tag.expensive { background: var(--color-warning); color: #000; }
.trip-plan-card { border: 1px solid var(--color-border); border-radius: 10px; padding: 15px; }
.trip-plan-header { padding-bottom: 15px; border-bottom: 1px solid var(--color-border); }
.trip-plan-summary.infeasible { color: var(--color-warning); }
.trip-plan-steps { list-style: none; margin-top: 15px; display: flex; flex-direction: column; gap: 12px; }
.trip-plan-step { display: flex; align-items: center; gap: 15px; }
.trip-step-icon { width: 36px; height: 36px; flex-shrink: 0; background-color: var(--color-bg-surface); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--color-text-secondary); }
.trip-step-icon svg { width: 20px; height: 20px; }
.trip-step-details { display: flex; justify-content: space-between; align-items: baseline; flex-grow: 1; }
.trip-step-cost { font-weight: 600; }
.trip-plan-footer { display: flex; justify-content: space-between; font-size: 1.1em; padding-top: 15px; margin-top: 15px; border-top: 1px solid var(--color-border); }

/* Dashboard Grids */
.dashboard-grid { display: grid; gap: 20px; grid-template-columns: repeat(2, 1fr); }
.kpi-grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); grid-column: span 2; }
@media (max-width: 768px) { .dashboard-grid, .kpi-grid { grid-template-columns: 1fr; } .kpi-grid {grid-column: span 1;} }
.grid-span-2 { grid-column: span 2; }
@media (max-width: 768px) { .grid-span-2 { grid-column: span 1; } }
.settings-grid { display: grid; gap: 30px; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); align-items: start; }
@media (max-width: 768px) { .settings-grid { grid-template-columns: 1fr; }}


/* Cards */
.card { background-color: var(--color-bg-surface); padding: 25px; border-radius: 12px; border: 1px solid var(--color-border); }
.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--color-border); }
.card-header-title { font-size: 1.2em; margin: 0; }
.card-subtitle { color: var(--color-text-secondary); margin: -15px 0 20px 0; font-size: 0.9em; }

/* Empty States */
.empty-state, .empty-state-actionable { text-align: center; padding: 50px 20px; border: 2px dashed var(--color-border); border-radius: 12px; }
.empty-state.mini { padding: 30px 20px; }
.empty-state-icon { color: var(--color-text-secondary); margin: 0 auto 20px; }
.empty-state-icon svg { width: 64px; height: 64px; }
.empty-state-icon > div > svg { width: 100%; height: 100%; }
.empty-state h2, .empty-state-actionable h2 { margin-bottom: 15px; }
.empty-state p, .empty-state-actionable p { max-width: 450px; margin: 0 auto 25px auto; }

/* Form Grids & Special Inputs */
.form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: end; }
.form-grid .form-group { margin-bottom: 0; }
@media(max-width: 768px) { .form-grid { grid-template-columns: 1fr; gap: 20px; } .form-grid .form-group { margin-bottom: 20px; } .form-grid .form-group:last-child { margin-bottom: 0; }}

/* Input with Suggest Button */
.input-with-button {
    display: flex;
    align-items: center;
    gap: 10px;
}
.input-with-button > *:first-child {
    flex-grow: 1;
}
.suggest-btn {
    padding: 10px 15px;
    flex-shrink: 0;
    font-size: 0.9em;
}
.suggest-btn .spinner {
    width: 1em;
    height: 1em;
}

.view-subheader { display: flex; justify-content: space-between; align-items: center; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
.view-subtitle { font-size: 1.05em; margin: 0; }
.view-actions { display: flex; gap: 15px; }


/* Progress Bar */
.progress-bar { width: 100%; height: 8px; background-color: var(--color-bg-main); border-radius: 4px; overflow: hidden; }
.progress-bar-inner { height: 100%; border-radius: 4px; background-color: var(--color-primary-main); transition: width 0.5s ease; }
.progress-bar-inner.good { background-color: var(--color-success); }
.progress-bar-inner.warning { background-color: var(--color-warning); }
.progress-bar-inner.over { background-color: var(--color-error); }

/* Goal View */
.goal-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.goal-card { padding: 20px; background-color: var(--color-bg-main); border-radius: 10px; border: 1px solid var(--color-border); position: relative; display: flex; flex-direction: column; }
.goal-card.completed { border-left: 4px solid var(--color-success); }
.goal-icon {
    font-size: 1.8em;
    line-height: 1;
    background-color: var(--color-bg-surface);
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border: 1px solid var(--color-border);
}
.goal-complete-badge { position: absolute; top: 15px; right: 15px; background: var(--color-success); color: #fff; padding: 4px 10px; border-radius: 12px; font-size: 0.8em; font-weight: 600; display: flex; align-items: center; gap: 5px; }
.goal-complete-badge svg { width: 14px; height: 14px; }
.goal-card-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px;}
.goal-card-header h3 { margin: 0; }
.goal-progress-item { margin-bottom: 15px; }
.goal-progress-header { display: flex; justify-content: space-between; font-size: 0.9em; margin-bottom: 8px; }
.goal-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9em;
    color: var(--color-text-secondary);
    margin-bottom: 15px;
}
.goal-meta .btn-icon {
    width: 16px;
    height: 16px;
}
.goal-card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; padding-top: 15px; border-top: 1px solid var(--color-border);}

/* Condensed lists for Dashboard */
.goal-list-condensed { display: flex; flex-direction: column; gap: 15px; }
.goal-row { display: flex; align-items: center; gap: 15px; }
.goal-row .item-icon { width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center; background-color: var(--color-bg-surface); font-size: 1.5em; flex-shrink: 0; }
.goal-row .item-details { flex-grow: 1; }
.goal-row .item-details strong { display: block; color: var(--color-text-primary); }
.goal-row .item-details span { font-size: 0.9em; }
.goal-row .progress-bar { flex-basis: 100px; }

/* Pot View */
.pot-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.pot-card {
    padding: 20px;
    background-color: var(--color-bg-main);
    border-radius: 10px;
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
}
.pot-card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}
.pot-icon {
    font-size: 1.8em;
    line-height: 1;
    background-color: var(--color-bg-surface);
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border: 1px solid var(--color-border);
}
.pot-card-header h3 {
    margin: 0;
    flex-grow: 1;
}
.pot-actions {
    display: flex;
    align-items: center;
}
.pot-card-body {
    text-align: center;
    margin-bottom: 20px;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}
.pot-amount {
    font-size: 2em;
    font-weight: 700;
    color: var(--color-text-primary);
}
.pot-card-footer {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid var(--color-border);
}
.pot-card-footer .btn {
    flex: 1;
}

/* Budget View */
.budget-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.budget-card {
    padding: 20px;
    background-color: var(--color-bg-main);
    border-radius: 10px;
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
}
.budget-card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}
.budget-icon {
    font-size: 1.8em;
    line-height: 1;
    background-color: var(--color-bg-surface);
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border: 1px solid var(--color-border);
}
.budget-card-header h3 {
    margin: 0;
    flex-grow: 1;
}
.budget-actions {
    display: flex;
    align-items: center;
}
.budget-card-body {
    margin-bottom: 20px;
}
.budget-amount strong {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--color-text-primary);
}
.budget-amount .text-secondary {
    font-size: 0.9em;
}
.budget-card-body .progress-bar {
    margin-top: 10px;
}
.budget-card-footer {
    display: flex;
    justify-content: space-between;
    font-size: 0.9em;
    color: var(--color-text-secondary);
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid var(--color-border);
}

/* Transaction View */
.transaction-list { display: flex; flex-direction: column; gap: 10px; }
.transaction-row { 
    display: grid; 
    grid-template-columns: auto 1fr auto auto auto;
    align-items: center; 
    gap: 15px; 
    padding: 15px;
    background-color: var(--color-bg-main); 
    border-radius: 8px; 
    border: 1px solid var(--color-border);
    transition: background-color 0.2s;
}
.transaction-row:hover { background-color: var(--color-bg-surface); }
.transaction-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-bg-surface);
    font-size: 1.6em;
}
.transaction-icon.recurring {
    color: var(--color-info);
}
.transaction-details strong { display: block; color: var(--color-text-primary); }
.transaction-details span { font-size: 0.9em; color: var(--color-text-secondary); }
.transaction-category { font-weight: 500; font-size: 0.95em; }
.transaction-amount { font-weight: 600; color: var(--color-error); justify-self: end; }
.transaction-actions { display: flex; gap: 5px; opacity: 0; transition: opacity 0.2s; }
.transaction-row:hover .transaction-actions { opacity: 1; }
@media(max-width: 768px) {
    .transaction-row {
        grid-template-columns: auto 1fr auto;
        grid-template-areas: 
            "icon details amount"
            "icon category actions";
        gap: 5px 15px;
        align-items: center;
    }
    .transaction-icon { grid-area: icon; }
    .transaction-details { grid-area: details; }
    .transaction-amount { grid-area: amount; }
    .transaction-category { grid-area: category; font-size: 0.9em;}
    .transaction-actions { grid-area: actions; justify-self: end; opacity: 1;}
}

/* Condensed Transaction List for Dashboard */
.transaction-list-condensed { display: flex; flex-direction: column; gap: 15px; }
.transaction-row.mini {
    display: flex;
    padding: 0;
    background: transparent;
    border: none;
}
.transaction-row.mini .transaction-icon { width: 40px; height: 40px; font-size: 1.5em; }
.transaction-row.mini .transaction-details { flex-grow: 1; }
.transaction-row.mini .transaction-amount { font-size: 1em; }
.bank-icon-small {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.bank-icon-small svg {
    width: 24px;
    height: 24px;
    border-radius: 50%;
}


/* Settings View */
.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
    border-bottom: 1px solid var(--color-border);
    flex-wrap: wrap;
    gap: 15px;
}
.setting-item:last-child { border-bottom: none; }
.setting-item > div { flex: 1 1 300px; }
.danger-zone .setting-item {
    border-top: 2px solid var(--color-error);
    margin-top: 20px;
    padding-top: 20px;
}
.danger-zone .setting-item strong {
    color: var(--color-error);
}

/* Linked & Recurring Accounts */
.card .card-body {
    padding: 0;
}
.linked-accounts-list, .recurring-transaction-list {
    display: flex;
    flex-direction: column;
}
.linked-account-item, .recurring-transaction-item {
    display: grid;
    grid-template-columns: auto 1fr auto auto;
    gap: 15px;
    align-items: center;
    padding: 15px 25px;
    border-bottom: 1px solid var(--color-border);
}
.linked-account-item:last-child, .recurring-transaction-item:last-child {
    border-bottom: none;
}
.bank-icon {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-bg-main);
    border: 1px solid var(--color-border);
}
.bank-icon svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
}
.linked-account-details strong, .recurring-transaction-details strong {
    display: block;
    color: var(--color-text-primary);
}
.recurring-transaction-details .text-secondary {
    text-transform: capitalize;
}
.sync-status, .recurring-transaction-next-due {
    font-size: 0.85em;
    color: var(--color-text-secondary);
    justify-self: end;
}
.linked-account-actions, .recurring-transaction-actions {
    display: flex;
    gap: 10px;
}
.linked-account-actions .btn-sm .spinner {
    width: 1em;
    height: 1em;
}

@media(max-width: 768px) {
    .linked-account-item {
        grid-template-columns: auto 1fr auto;
        grid-template-areas: 
            "icon details actions"
            "icon sync sync";
        row-gap: 8px;
    }
    .bank-icon { grid-area: icon; }
    .linked-account-details { grid-area: details; }
    .linked-account-actions { grid-area: actions; }
    .sync-status { grid-area: sync; justify-self: start; }
}


/* KPI Cards */
.kpi-card { text-align: center; padding: 20px; }
.kpi-title { font-size: 1em; color: var(--color-text-secondary); margin-bottom: 10px; font-weight: 500;}
.kpi-value { font-size: 2em; font-weight: 700; color: var(--color-text-primary); line-height: 1; }
.kpi-subtitle {
    font-size: 0.85em;
    color: var(--color-text-secondary);
    margin-top: 5px;
}

/* AI Financial Health Check */
.financial-health-card {
    padding: 0;
    display: flex;
    flex-direction: column;
}
.financial-health-card .card-header {
    padding: 25px;
    padding-bottom: 15px;
}
.health-check-content {
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 30px 25px;
}
.health-check-content.initial {
    flex-direction: column;
    text-align: center;
}
.health-check-content.loading {
    flex-direction: column;
    gap: 20px;
    color: var(--color-text-secondary);
    font-weight: 500;
}
.health-check-content.results {
    flex-direction: row;
    align-items: flex-start;
    gap: 30px;
}
@media (max-width: 576px) {
    .health-check-content.results {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
}
.health-score-circle {
    width: 120px;
    height: 120px;
    flex-shrink: 0;
}
.circular-chart {
    display: block;
    max-width: 100%;
    max-height: 100%;
}
.circular-chart .circle-bg {
    fill: none;
    stroke: var(--color-border);
    stroke-width: 3.8;
}
.circular-chart .circle {
    fill: none;
    stroke: var(--score-color);
    stroke-width: 2.8;
    stroke-linecap: round;
    animation: progress 1s ease-out forwards;
}
.health-score-value {
    font-family: var(--font-heading);
    fill: var(--color-text-primary);
    font-size: 0.8em;
    font-weight: 700;
    text-anchor: middle;
}
@keyframes progress {
    0% { stroke-dasharray: 0 100; }
}

.health-results-summary {
    flex-grow: 1;
}
.ai-summary {
    font-style: italic;
    color: var(--color-text-primary);
    margin-bottom: 20px;
    border-left: 3px solid var(--color-primary-main);
    padding-left: 15px;
}

.health-result-lists {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
}
@media (max-width: 576px) {
    .health-result-lists {
        grid-template-columns: 1fr;
    }
}
.health-result-list h4 {
    font-size: 1em;
    margin-bottom: 10px;
}
.health-result-list ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.health-result-item {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    font-size: 0.9em;
}
.health-result-item .btn-icon {
    width: 18px;
    height: 18px;
    margin-top: 2px;
}
.health-result-item.positive .btn-icon {
    color: var(--color-success);
}
.health-result-item.improvement .btn-icon {
    color: var(--color-warning);
}


/* Marketplace View */
.marketplace-view {
    display: flex;
    flex-direction: column;
    gap: 30px;
    flex-grow: 1;
}
.marketplace-search-form {
    display: flex;
    gap: 10px;
}
.marketplace-search-form .input-field {
    flex-grow: 1;
}
.marketplace-search-form .btn {
    flex-shrink: 0;
}

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.product-card {
    background-color: var(--color-bg-main);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
}
.product-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
}
.product-image-container {
    width: 100%;
    aspect-ratio: 1 / 1;
    background-color: var(--color-bg-surface);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    color: var(--color-text-secondary);
}
.product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.product-details {
    padding: 15px;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}
.product-name {
    font-size: 1em;
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--color-text-primary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 2.4em; /* for 2 lines */
}
.product-merchant {
    font-size: 0.85em;
    color: var(--color-text-secondary);
    margin-bottom: 15px;
}
.product-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
}
.product-price {
    font-size: 1.1em;
    font-weight: 700;
    color: var(--color-primary-main);
}

/* Marketplace Skeleton */
.skeleton-product-card {
    background-color: var(--color-bg-main);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
}
.skeleton-image {
    width: 100%;
    aspect-ratio: 1 / 1;
    background-color: var(--color-bg-surface);
}
.skeleton-details {
    padding: 15px;
}
.skeleton-line {
    height: 1em;
    background-color: var(--color-bg-surface);
    border-radius: 4px;
    margin-bottom: 10px;
}
.skeleton-line.short {
    width: 60%;
}
.skeleton-line.price {
    width: 40%;
    height: 1.5em;
    margin-top: 15px;
    background-color: var(--color-bg-surface);
}

/* Reports View */
.reports-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
}
@media (max-width: 992px) {
    .reports-grid {
        grid-template-columns: 1fr;
    }
}

.chart-container {
    display: flex;
    align-items: center;
    gap: 30px;
    padding: 20px 0;
}
@media (max-width: 768px) {
    .chart-container {
        flex-direction: column;
    }
}
.donut-chart-svg {
    width: 200px;
    height: 200px;
    transform: rotate(-90deg);
    flex-shrink: 0;
}
.donut-hole {
    fill: transparent;
}
.donut-segment {
    fill: transparent;
    stroke-width: 20;
    transition: stroke-dasharray 0.5s ease;
}
.donut-center-text {
    transform: rotate(90deg) translate(0, -200px);
}
.donut-center-label {
    font-size: 14px;
    fill: var(--color-text-secondary);
    font-family: var(--font-body);
}
.donut-center-value {
    font-size: 24px;
    font-weight: 700;
    fill: var(--color-text-primary);
    font-family: var(--font-heading);
}

.chart-legend {
    flex-grow: 1;
    width: 100%;
}
.chart-legend ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.chart-legend li {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.95em;
}
.legend-color {
    width: 14px;
    height: 14px;
    border-radius: 4px;
    flex-shrink: 0;
}
.legend-name {
    flex-grow: 1;
    color: var(--color-text-primary);
}
.legend-percentage {
    font-weight: 600;
}

.budget-performance-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding-top: 10px;
}

.budget-performance-item {
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-areas: 
        "icon details"
        "icon progress";
    align-items: center;
    column-gap: 15px;
    row-gap: 8px;
}
.budget-performance-item .item-icon {
    grid-area: icon;
    width: 44px;
    height: 44px;
    border-radius: 10px;
    background-color: var(--color-bg-main);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.6em;
}
.budget-performance-item .item-details {
    grid-area: details;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}
.budget-performance-item .item-details strong {
    color: var(--color-text-primary);
}
.budget-performance-item .item-details span {
    font-size: 0.9em;
    color: var(--color-text-secondary);
}
.budget-performance-item .progress-bar {
    grid-area: progress;
}


/* Toast/Notification Container */
#toast-container { position: fixed; top: 20px; right: 20px; z-index: 2000; display: flex; flex-direction: column; gap: 10px; }
.toast { padding: 15px 20px; border-radius: 8px; color: #fff; font-weight: 500; min-width: 250px; box-shadow: var(--shadow-medium); animation: slideInRightToast 0.5s ease; opacity: 0.95; }
.toast.success { background-color: var(--color-success); }
.toast.error { background-color: var(--color-error); }
.toast.info { background-color: var(--color-info); }
@keyframes slideInRightToast { from { opacity: 0; transform: translateX(100%); } to { opacity: 0.95; transform: translateX(0); } }

/* Footer */
.footer { padding: 40px 0; background-color: var(--color-bg-surface); text-align: center; }
.footer p { color: var(--color-text-secondary); }